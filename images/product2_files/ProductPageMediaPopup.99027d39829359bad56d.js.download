(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[242],{3102:function(e,t,i){e.exports={container:"_3FzHnX",mediaPreview:"_3TtC8T",imagePlaceholder:"_1QSz1W",arrowLeft:"rv7fwm",arrowRight:"HhAy2u",video:"_18NE0y",videoClickMask:"_3xJlF0",playButton:"_1YjD61",replayButton:"s9gi2R",overlayWrapper:"_2TD6up",hidden:"_2OA-t2",videoError:"_3n__-5",videoErrorBtn:"_1wnrXs",videoErrorTxt:"urYZCt",videoErrorSuggestion:"_2AECp6",videoErrorMask:"_1CBukO"}},3103:function(e,t,i){e.exports={container:"_338qaA",title:"_2xEec7",thumbnails:"_2tm-At",thumbnail:"_2e-ot7",actions:"_1VnKdi",button:"_1Ji1OB",addToCartButton:"_1RRhCq",addToCartIcon:"_13LNsl"}},3104:function(e,t,i){e.exports={container:"_2yjnsD"}},3681:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(38),d=i.n(o),s=i(393),r=i(1102),l=i(1670),c=i(1039),h=i(835),m=i(916),v=i(907),u=i(1094),p=i(1099),f=i(72),E=i(73),y=i(3102),S=i.n(y);function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=E.c.t,k=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this).initializeVideo=function(e){if(p.a&&e&&"video"===e.type&&i.videoDom&&!i.videoPlayer){var t=new p.d(__LOCALE__,i.videoDom,e.id?e.id:"",e.version);t.initialize(),t.on(p.b.ENDED,i.handleVideoEnded),t.on(p.b.PLAY,i.handleVideoPlaying),t.on(p.b.PLAYING,i.handleVideoPlaying),t.on(p.b.PAUSED,i.handleVideoPaused),t.on(p.b.SEEKING,i.handleVideoSeeking),t.on(p.b.SEEKED,i.handleVideoSeeked),i.videoPlayer=t,t.play()}},i.setVideoDomRef=function(e){e&&(i.videoDom=e)},i.state={videoState:p.c.PLAYING,isVideoPausedByUser:!1},i.handleVideoPlaying=i.handleVideoPlaying.bind(_(i)),i.handleVideoPaused=i.handleVideoPaused.bind(_(i)),i.handleVideoEnded=i.handleVideoEnded.bind(_(i)),i.handleVideoSeeking=i.handleVideoSeeking.bind(_(i)),i.handleVideoSeeked=i.handleVideoSeeked.bind(_(i)),i.handleVideoClick=i.handleVideoClick.bind(_(i)),i.initializeVideo=i.initializeVideo.bind(_(i)),i.videoPlayer=null,i.videoDom=null,i.mounted=!1,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.componentDidMount=function(){this.mounted=!0,this.initializeVideo(this.props.media)},o.UNSAFE_componentWillReceiveProps=function(e){this.initializeVideo(e.media)},o.componentDidUpdate=function(e){var t=this.props.media,i=this.videoPlayer;i&&t&&(e.media&&t.type===e.media.type&&t.mediaId===e.media.mediaId||("video"===t.type?this.state.isVideoPausedByUser||i&&i.play():i&&i.pause()))},o.componentWillUnmount=function(){this.mounted=!1,this.videoPlayer&&this.videoPlayer.destroy(),this.videoDom=null},o.handleVideoPlaying=function(){this.mounted&&this.setState({videoState:p.c.PLAYING})},o.handleVideoPaused=function(){this.mounted&&this.setState({videoState:p.c.PAUSED})},o.handleVideoEnded=function(){this.mounted&&this.setState({videoState:p.c.ENDED})},o.handleVideoSeeking=function(){this.mounted&&this.setState({videoState:p.c.SEEKING})},o.handleVideoSeeked=function(){this.mounted&&this.setState({videoState:this.videoPlayer&&this.videoPlayer.isPaused()?p.c.PAUSED:p.c.PLAYING})},o.handleVideoClick=function(){if(this.videoPlayer){var e=this.videoPlayer;e.isPaused()?e.play():e.pause(),this.mounted&&(this.state.videoState===p.c.ENDED?this.setState({isVideoPausedByUser:!1}):this.setState({isVideoPausedByUser:!this.state.isVideoPausedByUser}),this.setState({videoState:this.state.videoState===p.c.PLAYING?p.c.PAUSED:p.c.PLAYING}))}},o.render=function(){var e,t=this.props,i=t.media,a=t.showArrows,o=t.onLeftArrowClick,s=t.onRightArrowClick,E=t.overlays,y=t.previewInfo,_=t.flashSaleInfo,k=this.state.videoState,I=!!i&&"video"===i.type;return n.createElement("div",{className:S.a.container},n.createElement("video",{ref:this.setVideoDomRef,"data-dashjs-player":!0,controls:!0,style:{display:I&&p.a?"block":"none"},className:S.a.video}),I&&(p.a?n.createElement(n.Fragment,null,n.createElement("div",{className:S.a.videoClickMask,onClick:this.handleVideoClick}),k===p.c.PAUSED||k===p.c.SEEKING?n.createElement(l.a,{className:S.a.playButton}):k===p.c.ENDED&&n.createElement(c.a,{className:S.a.replayButton})):n.createElement("div",{className:S.a.videoError,style:i?{backgroundImage:"url("+Object(f.e)(i.mediaId,!1)+")"}:null},n.createElement("div",{className:S.a.videoErrorMask},n.createElement(r.a,{className:S.a.videoErrorBtn}),n.createElement("div",{className:S.a.videoErrorTxt},w("msg_video_not_supported")),n.createElement("div",{className:S.a.videoErrorSuggestion},w("msg_suggest_chrome"))))),!I&&n.createElement(h.a,{src:i&&i.mediaId?Object(f.e)(i.mediaId):"",className:S.a.mediaPreview,placeholderClassName:S.a.imagePlaceholder}),!!E&&n.createElement("div",{className:d()(S.a.overlayWrapper,(e={},e[S.a.hidden]=I&&k!==p.c.ENDED,e))},n.createElement(u.a,{overlays:E,previewInfo:y,flashSaleInfo:_})),a&&n.createElement("div",{className:S.a.arrowLeft,onClick:o},n.createElement(m.a,null)),a&&n.createElement("div",{className:S.a.arrowRight,onClick:s},n.createElement(v.a,null)))},a}(n.Component),I=i(67),P=i(2317),C=i(1351),N=i(3103),V=i.n(N);var b=Object(I.connect)(function(e,t){var i=t.item?Object(C.b)(e,t.item.shopid):null;return{shop:i&&i.shopInfo}})(function(e){var t=e.item,i=e.overlays;return a.a.createElement("div",{className:V.a.container},a.a.createElement("div",{className:V.a.title},t?t.name:null),a.a.createElement("div",{className:V.a.thumbnails},e.mediaList.map(function(n,o){return a.a.createElement(P.a,{key:o,media:n,isActive:e.selectedIndex===o,className:V.a.thumbnail,onClick:function(){return e.onClick(o)},showMediaDuration:!0,showHoverMask:!0,overlays:0===o?i:void 0,previewInfo:t?t.preview_info:void 0,flashSaleInfo:t?t.flash_sale:void 0})})))}),D=i(3104),g=i.n(D);function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x=-1,L=1,U=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this).state={selectedIndex:t.selectedIndex},i.onMediaClick=i.onMediaClick.bind(A(i)),i.handleKeyDown=i.handleKeyDown.bind(A(i)),i.moveSelectedIndex=i.moveSelectedIndex.bind(A(i)),i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.UNSAFE_componentWillMount=function(){window.addEventListener("keydown",this.handleKeyDown)},o.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},o.onMediaClick=function(e){this.setState({selectedIndex:e})},o.handleKeyDown=function(e){switch(e.preventDefault(),e.keyCode){case 27:return void this.props.onClose();case 37:return void this.moveSelectedIndex(x);case 39:return void this.moveSelectedIndex(L)}},o.moveSelectedIndex=function(e){var t=this.props.mediaList,i=t?t.length:0;i>1&&this.setState({selectedIndex:(this.state.selectedIndex+e+i)%i})},o.render=function(){var e=this,t=this.props,i=this.state.selectedIndex,a=t.item,o=t.mediaList,r=t.overlays,l=t.addItemToCart;return n.createElement(s.b,{closeWhenClickOverlay:!0,onClose:t.onClose},n.createElement("div",{className:d()("flex",g.a.container)},n.createElement(k,{media:o&&o[i],showArrows:o&&o.length>1,onLeftArrowClick:function(){return e.moveSelectedIndex(x)},onRightArrowClick:function(){return e.moveSelectedIndex(L)},overlays:0===i?r:void 0,previewInfo:a?a.preview_info:void 0,flashSaleInfo:a?a.flash_sale:void 0}),n.createElement(b,{item:a,mediaList:o,selectedIndex:i,showMediaDuration:!0,onClick:this.onMediaClick,addItemToCart:l,overlays:r,flashSaleInfo:a?a.flash_sale:void 0})))},a}(n.Component);t.default=U}}]);
//# sourceMappingURL=https://shopee.sg/assets/ProductPageMediaPopup.99027d39829359bad56d.js.map